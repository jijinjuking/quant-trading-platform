//! # Tick 模型 (Tick Model)
//! 
//! 定义逐笔成交数据的领域实体。
//! 
//! ## 说明
//! Tick 是最细粒度的行情数据，记录每一笔成交的详细信息。

// ============================================================================
// 外部依赖导入
// ============================================================================

use chrono::{DateTime, Utc};  // 时间处理 - 成交时间
use rust_decimal::Decimal;     // 高精度十进制 - 价格和数量
use serde::{Deserialize, Serialize};  // 序列化/反序列化

// ============================================================================
// Tick 实体
// ============================================================================

/// Tick 实体 - 逐笔成交数据
/// 
/// 记录单笔成交的详细信息，是行情数据的最小单位。
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Tick {
    /// 交易所名称 - 如 "binance", "okx"
    pub exchange: String,
    
    /// 交易对符号 - 如 "BTC/USDT"
    pub symbol: String,
    
    /// 成交价格
    pub price: Decimal,
    
    /// 成交数量
    pub volume: Decimal,
    
    /// 成交方向 - 买入或卖出
    pub side: TickSide,
    
    /// 成交时间（UTC）
    pub timestamp: DateTime<Utc>,
}

// ============================================================================
// Tick 方向枚举
// ============================================================================

/// Tick 方向 - 标识成交的买卖方向
#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum TickSide {
    /// 买入成交 - 主动买入
    Buy,
    /// 卖出成交 - 主动卖出
    Sell,
}
