# 端口配置总结 / Port Configuration Summary

## 当前端口分配 / Current Port Allocation

| 服务名称 / Service Name | 端口 / Port | 环境变量 / Environment Variable | 状态 / Status |
|------------------------|-------------|--------------------------------|---------------|
| 市场数据服务 / Market Data | 8081 | `MARKET_DATA__SERVER__PORT` | ✅ 已配置 |
| 交易引擎 / Trading Engine | 8082 | `TRADING_ENGINE__SERVER__PORT` | ✅ 已配置 |
| 策略引擎 / Strategy Engine | 8083 | `STRATEGY_ENGINE__SERVER__PORT` | ✅ 已配置 |
| 用户管理 / User Management | 8084 | `USER_MANAGEMENT_PORT` | ✅ 已配置 |
| 风险管理 / Risk Management | 8085 | `RISK_MANAGEMENT__SERVER__PORT` | ✅ 已配置 |
| 通知服务 / Notification | 8086 | `NOTIFICATION_PORT` | ✅ 已配置 |
| AI智能服务 / AI Service | 8088 | `AI_SERVICE__SERVER__PORT` | ✅ 已配置 |

## 前端配置 / Frontend Configuration

前端通过环境变量配置后端服务地址：
Frontend configures backend service addresses via environment variables:

```bash
# quant-backend66/.env.local
VITE_API_BASE_URL=http://localhost
VITE_MARKET_DATA_PORT=8081
VITE_TRADING_ENGINE_PORT=8082
VITE_STRATEGY_ENGINE_PORT=8083
VITE_USER_MANAGEMENT_PORT=8084
VITE_RISK_MANAGEMENT_PORT=8085
VITE_NOTIFICATION_PORT=8086
VITE_AI_SERVICE_PORT=8088
```

## 端口冲突解决方案 / Port Conflict Resolution

### 方法1：修改环境变量 / Method 1: Modify Environment Variables
```bash
# 如果8083端口被占用，可以修改策略引擎端口
# If port 8083 is occupied, modify strategy engine port
STRATEGY_ENGINE__SERVER__PORT=8085
VITE_STRATEGY_ENGINE_PORT=8085
```

### 方法2：交换端口 / Method 2: Swap Ports
```bash
# 交换策略引擎和风险管理的端口
# Swap ports between strategy engine and risk management
STRATEGY_ENGINE__SERVER__PORT=8085
RISK_MANAGEMENT__SERVER__PORT=8083
VITE_STRATEGY_ENGINE_PORT=8085
VITE_RISK_MANAGEMENT_PORT=8083
```

## 配置文件位置 / Configuration File Locations

- 后端环境变量 / Backend Environment: `22/.env`
- 前端环境变量 / Frontend Environment: `quant-backend66/.env.local`
- 配置模板 / Configuration Template: `22/.env.template`

## 验证配置 / Verify Configuration

1. 检查后端服务启动日志中的端口信息
   Check port information in backend service startup logs

2. 使用前端API测试工具验证连接
   Use frontend API test tool to verify connections

3. 检查端口占用情况：
   Check port usage:
   ```bash
   netstat -an | findstr :808
   ```

## 注意事项 / Notes

- 所有服务都支持通过环境变量覆盖默认端口配置
  All services support overriding default port configuration via environment variables

- 前端和后端的端口配置必须保持一致
  Frontend and backend port configurations must be consistent

- 修改端口后需要重启相应的服务
  Services need to be restarted after port changes