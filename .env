# 量化交易平台环境配置
# 基于 .env.template 创建

# ===================
# 数据库配置
# ===================
POSTGRES_PASSWORD=postgres123
CLICKHOUSE_PASSWORD=
GRAFANA_PASSWORD=admin123

# ===================
# 服务配置 / Service Configuration
# ===================

# 市场数据服务 / Market Data Service
MARKET_DATA__SERVER__HOST=0.0.0.0
MARKET_DATA__SERVER__PORT=8082
MARKET_DATA__STORAGE__REDIS__URL=redis://localhost:6379
MARKET_DATA__STORAGE__CLICKHOUSE__URL=http://localhost:8123

# 交易引擎服务 / Trading Engine Service
TRADING_ENGINE__SERVER__HOST=0.0.0.0
TRADING_ENGINE__SERVER__PORT=8082

# 策略引擎服务 / Strategy Engine Service
STRATEGY_ENGINE__SERVER__HOST=0.0.0.0
STRATEGY_ENGINE__SERVER__PORT=8083

# 策略配置 / Strategy Configuration
STRATEGY_TYPE=grid
# 网格策略配置 (当前BTC价格约87750)
# 区间4000美元，4000格，每格1美元触发一次
STRATEGY_GRID_UPPER=90000
STRATEGY_GRID_LOWER=86000
STRATEGY_GRID_COUNT=4000
STRATEGY_GRID_QUANTITY=0.001
# 均值回归策略配置
STRATEGY_MEAN_WINDOW=20
STRATEGY_MEAN_THRESHOLD=0.005
STRATEGY_MEAN_QUANTITY=0.001

# 用户管理服务 / User Management Service
USER_MANAGEMENT__SERVER__HOST=0.0.0.0
USER_MANAGEMENT_PORT=8084

# 风险管理服务 / Risk Management Service
RISK_MANAGEMENT__SERVER__HOST=0.0.0.0
RISK_MANAGEMENT__SERVER__PORT=8085
RISK_MANAGEMENT_PORT=8085

# Risk Management 风控配置
RISK_ALLOW_SYMBOLS=BTCUSDT,ETHUSDT
RISK_MIN_QTY=0.0001
RISK_MAX_QTY=10
RISK_MAX_NOTIONAL=100000
RISK_MAX_POSITION=100
RISK_MAX_LEVERAGE=10
RISK_MAX_DRAWDOWN=0.20

# 通知服务 / Notification Service
NOTIFICATION__SERVER__HOST=0.0.0.0
NOTIFICATION_PORT=8086

# 分析服务 / Analytics Service
ANALYTICS__SERVER__HOST=0.0.0.0
ANALYTICS__SERVER__PORT=8087

# AI智能分析服务 / AI Intelligence Service
AI_SERVICE__SERVER__HOST=0.0.0.0
AI_SERVICE__SERVER__PORT=8088

# ===================
# 外部API配置 / External API Configuration
# ===================
# 币安代理配置 / Binance Proxy Configuration
BINANCE_PROXY_HOST=127.0.0.1
BINANCE_PROXY_PORT=4781

# ===================
# 开发环境标识 / Development Environment
# ===================
# 环境类型 / Environment Type
ENVIRONMENT=development
# 调试模式 / Debug Mode
DEBUG=true

# ===================
# 代理配置
# ===================
HTTP_PROXY=http://127.0.0.1:4780
HTTPS_PROXY=http://127.0.0.1:4780

# ===================
# Market Data 配置
# ===================
BINANCE_WS_URL=wss://stream.binance.com:9443/ws
MARKET_DATA_PROXY=http://127.0.0.1:4780
MARKET_DATA_SYMBOLS=btcusdt
MARKET_DATA_STORAGE_ENABLED=true

# ===================
# ClickHouse 配置
# ===================
CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_DATABASE=market_data
CLICKHOUSE_TABLE=trades

# ===================
# Kafka 配置
# ===================
KAFKA_BROKERS=localhost:9092
KAFKA_MARKET_TOPIC=market-events
KAFKA_SIGNAL_TOPIC=trading.signals

# ===================
# Redis 配置
# ===================
REDIS_URL=redis://localhost:6379
STRATEGY_STATE_TTL_SECONDS=86400

# ===================
# Trading Engine 风控配置
# ===================
TRADING_RISK_ALLOW_SYMBOLS=BTCUSDT
TRADING_RISK_MIN_QTY=0.0001
TRADING_RISK_MAX_QTY=0.01
TRADING_RISK_MAX_NOTIONAL=1000

# Trading Engine 风控模式
# remote = 调用 risk-management HTTP API (8085)
# local = 使用本地风控适配器
TRADING_RISK_MODE=remote
RISK_MANAGEMENT_URL=http://localhost:8085

# Trading Engine 策略模式
# remote = 调用 strategy-engine HTTP API
# noop = 不调用策略（测试用）
TRADING_STRATEGY_MODE=remote
STRATEGY_ENGINE_URL=http://localhost:8083

# Trading Engine 熔断配置
RISK_CIRCUIT_BREAKER_THRESHOLD=5
RISK_CIRCUIT_BREAKER_DURATION_SECS=300
TRADING_ENABLED=true

# ===================
# 数据库配置
# ===================
DATABASE_URL=postgres://postgres:password@localhost:5432/trading
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DATABASE=trading_db

# Trading Engine 存储配置
TRADING_STORAGE_ENABLED=true

# ===================
# 币安 API（测试网）
# ===================
BINANCE_API_KEY=ATvpv6mfaou7pwschWsjpfDhAT1rL8R7A7UWNoQicvFwKH8FRz7al98eHqMx1jsP
BINANCE_SECRET_KEY=dJn5N3Mo5olUsM1zck0Gj2ny4vwycTZkBFxgcUM8zCfJGGoCeJ8sD3GsBt0t0KTa
BINANCE_BASE_URL=https://testnet.binance.vision
TRADING_EXECUTION_MODE=binance
